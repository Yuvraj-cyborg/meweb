@import url("https://cdn.jsdelivr.net/npm/cmu-sans-serif@latest/cmu-sans-serif.css");
@import "tailwindcss";
@plugin "@tailwindcss/typography";

@layer base {
  html {
    font-family: "CMU Sans Serif", -apple-system, BlinkMacSystemFont, "Segoe UI",
      sans-serif;
  }

  /* Light mode styles - matching mxnish-me */
  :root {
    --bg-primary: hsl(0, 0%, 100%); /* --bg: 0 0% 100% */
    --bg-secondary: hsl(0, 0%, 92%); /* --bg-dark: 0 0% 92% */
    --text-primary: hsl(0, 0%, 20%); /* --fg: 0 0% 20% */
    --text-secondary: hsl(0, 0%, 35%); /* --fg-light: 0 0% 35% */
    --border-color: hsl(0, 0%, 85%); /* --border: 0 0% 85% */
    --accent-color: #10b981;
    --accent-hover: #059669;
    --code-bg: hsl(0, 0%, 17%);
    --code-fg: hsl(0, 0%, 85%);
  }

  /* Dark mode styles - matching mxnish-me */
  @media (prefers-color-scheme: dark) {
    :root {
      --bg-primary: hsl(0, 0%, 17%); /* --bg: 0 0% 17% */
      --bg-secondary: hsl(0, 0%, 25%); /* --bg-dark: 0 0% 25% */
      --text-primary: hsl(0, 0%, 85%); /* --fg: 0 0% 85% */
      --text-secondary: hsl(0, 0%, 75%); /* --fg-light: 0 0% 75% */
      --border-color: hsl(0, 0%, 35%); /* --border: 0 0% 35% */
      --accent-color: #10b981;
      --accent-hover: #34d399;
      --code-bg: hsl(0, 0%, 10%);
      --code-fg: hsl(0, 0%, 85%);
    }
  }

  [data-theme="light"] {
    --bg-primary: hsl(0, 0%, 100%);
    --bg-secondary: hsl(0, 0%, 92%);
    --text-primary: hsl(0, 0%, 20%);
    --text-secondary: hsl(0, 0%, 35%);
    --border-color: hsl(0, 0%, 85%);
    --accent-color: #10b981;
    --accent-hover: #059669;
    --code-bg: hsl(0, 0%, 17%);
    --code-fg: hsl(0, 0%, 85%);
  }

  [data-theme="dark"] {
    --bg-primary: hsl(0, 0%, 17%);
    --bg-secondary: hsl(0, 0%, 25%);
    --text-primary: hsl(0, 0%, 85%);
    --text-secondary: hsl(0, 0%, 75%);
    --border-color: hsl(0, 0%, 35%);
    --accent-color: #10b981;
    --accent-hover: #34d399;
    --code-bg: hsl(0, 0%, 10%);
    --code-fg: hsl(0, 0%, 85%);
  }

  body {
    background-color: var(--bg-primary);
    color: var(--text-primary);
    /* Remove transition to prevent flash during theme changes */
  line-height: 1.6;
  /* Prevent slow transitions on background/color which cause flicker */
  transition: none !important;
  }
}

/* Custom prose overrides for typography plugin */
.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
  color: var(--text-primary);
}

.prose p {
  margin-top: 0.75em;
  margin-bottom: 0.75em;
}

.prose pre {
  background-color: var(--code-bg) !important;
  color: var(--code-fg);
}

.prose pre code {
  background-color: transparent;
  color: inherit;
}

/* Header container stable sizing to avoid blink/growth */
.site-header, header, .min-w-fit {
  /* fix height so active state doesn't change layout */
  height: 2.75rem;
  min-height: 2.75rem;
}

/* Override any global transition-all class in header children to only animate colors */
.site-header *[class*="transition-all"], header *[class*="transition-all"] {
  transition-property: color, background-color, border-color, box-shadow !important;
}
