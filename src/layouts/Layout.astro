---
import '../styles/global.css';
import { ViewTransitions } from 'astro:transitions';
import { inject } from '@vercel/analytics';

inject();

export interface Props {
  title: string;
  description?: string;
}

const { title, description = "Systems Engineer & Quantum Computing Researcher" } = Astro.props;

const navItems = [
  { href: '/', label: 'index' },
  { href: '/about', label: 'about' },
  { href: '/work', label: 'work' },
  { href: '/now', label: 'now' },
];

const currentPath = Astro.url.pathname;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="dark" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <ViewTransitions />
    <style is:inline>
      html::view-transition-old(root),
      html::view-transition-new(root),
      body::view-transition-old(root),
      body::view-transition-new(root) {
        background: var(--bg-primary);
      }
    </style>
  </head>
  <body class="min-h-screen grid-bg">
    <div class="flex min-h-screen">
      <!-- Side Navigation -->
      <aside class="hidden md:flex md:w-48 lg:w-64 flex-col border-r border-[var(--border-color)] p-8 sticky top-0 h-screen">
        <div class="mb-12">
          <h1 class="text-xl font-bold mb-1" style="color: var(--accent);">yuvraj</h1>
          <p class="text-xs text-[var(--text-muted)]">~</p>
        </div>
        
        <nav class="space-y-2 flex-1">
          {navItems.map((item) => {
            const isActive = currentPath === item.href || (item.href !== '/' && currentPath.startsWith(item.href));
            return (
              <a
                href={item.href}
                class={`block text-sm transition-colors ${
                  isActive
                    ? 'text-[var(--accent)]'
                    : 'text-[var(--text-secondary)] hover:text-[var(--text-primary)]'
                }`}
              >
                <span class="text-[var(--text-muted)]">$</span> {item.label}
              </a>
            );
          })}
        </nav>

        <div class="text-xs text-[var(--text-muted)] border-t border-[var(--border-color)] pt-4">
          <p>Â© 2025</p>
        </div>
      </aside>

      <!-- Mobile Header -->
      <div class="md:hidden fixed top-0 left-0 right-0 bg-[var(--bg-primary)] border-b border-[var(--border-color)] z-50 backdrop-blur">
        <div class="flex items-center justify-between p-4">
          <span class="font-bold" style="color: var(--accent);">yuvraj</span>
          <nav class="flex gap-4 text-sm">
            {navItems.map((item) => {
              const isActive = currentPath === item.href || (item.href !== '/' && currentPath.startsWith(item.href));
              return (
                <a
                  href={item.href}
                  class={isActive ? 'text-[var(--accent)]' : 'text-[var(--text-secondary)]'}
                >
                  {item.label}
                </a>
              );
            })}
          </nav>
        </div>
      </div>

      <!-- Main Content -->
      <main class="flex-1 p-8 md:p-12 lg:p-16 max-w-5xl mt-16 md:mt-0">
        <slot />
      </main>
    </div>
  </body>
</html>
