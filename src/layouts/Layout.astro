---
import '../styles/global.css';
import { ViewTransitions } from 'astro:transitions';
import Analytics from '@vercel/analytics/astro';

export interface Props {
  title: string;
  description?: string;
}

const { title, description = "Systems Engineer & Researcher" } = Astro.props;

const navItems = [
  { href: '/', label: 'Index' },
  { href: '/about', label: 'About' },
  { href: '/work', label: 'Work' },
  { href: '/blog', label: 'Blog' },
  { href: '/now', label: 'Now' },
];

const currentPath = Astro.url.pathname;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <ViewTransitions />
    <Analytics mode="production"/>
  </head>
  <body class="min-h-screen">
    <!-- Fixed Navigation -->
    <header class="fixed top-0 left-0 right-0 z-50 pt-6 pb-4 bg-[var(--bg-primary)]" transition:animate="none" style="view-transition-name: header;">
      <nav class="flex items-center justify-center gap-4 py-2 px-4 bg-white border border-[var(--border-color)] rounded-md w-fit mx-auto shadow-sm">
        {navItems.map((item) => {
          const isActive = currentPath === item.href || (item.href !== '/' && currentPath.startsWith(item.href));
          return (
            <a
              href={item.href}
              class={`text-sm px-2 py-1 transition-colors duration-150 ${
                isActive
                  ? 'text-[var(--slate-800)] font-medium'
                  : 'text-[var(--slate-500)] hover:text-[var(--slate-700)]'
              }`}
            >
              {item.label}
            </a>
          );
        })}
      </nav>
    </header>

    <div class="max-w-2xl mx-auto px-6 pt-36 pb-12">
      <main>
        <slot />
      </main>

      <!-- Footer -->
      <footer class="mt-24 pt-8 border-t border-[var(--border-color)] text-center text-sm text-[var(--text-muted)]">
        <p>Â© 2026 Yuvraj Biswal</p>
      </footer>
    </div>
  </body>
</html>
